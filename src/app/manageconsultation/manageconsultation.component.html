<div class="dashboard-container">
  <nav class="sidebar">
    <div class="sidebar-header">
      <h2 class="logo-text">Adishakti</h2>
    </div>
    <ul class="sidebar-menu">
      <li><a routerLink="/admin" routerLinkActive="active"><i class="bi bi-house-door-fill"></i> Dashboard</a></li>
      <li><a routerLink="/manageusers" routerLinkActive="active"><i class="bi bi-people-fill"></i> Manage Users</a></li>
      <li><a routerLink="/manageastrologer" routerLinkActive="active"><i class="bi bi-person-check-fill"></i> Manage Astrologers</a></li>
      <li><a routerLink="/manageblog" routerLinkActive="active"><i class="bi bi-vector-pen"></i> Manage Blog</a></li>
      <li><a routerLink="/manageskills" routerLinkActive="active"><i class="bi bi-award-fill"></i> Manage Skills</a></li>
      <li><a routerLink="/manage-payment" routerLinkActive="active"><i class="bi bi-credit-card-fill"></i> Manage Payment</a></li>
      <li><a routerLink="/manage-consult" routerLinkActive="active"><i class="bi bi-calendar-fill"></i> Manage Consultation</a></li>
      <li><a routerLink="/manage-astro-feedback" routerLinkActive="active"><i class="bi bi-chat-dots-fill"></i> Astrologer Feedback</a></li>
      <li><a href="#" (click)="logout($event)"><i class="bi bi-power"></i> Logout</a></li>
    </ul>
  </nav>

  <div class="main-content">
    <div class="row">
      <div class="col-md-12 one">
        <h2 class="text-center mt-4">Manage Consultation</h2>
      </div>
    </div>

    <div class="container mt-4">
      <!-- Table to display the consultation rates -->
      <table class="table table-hover table-striped" *ngIf="consultationPrices.length > 0">
        <thead style="background-color: #4c70ba; color: white;">
          <tr>
            <th>Sr No</th>
            <th>Astrologer Name</th>
            <th>Rate per Minute (INR)</th>
            <th>Mobile Number</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let consultation of consultationPrices; let i = index">
            <td>{{ i + 1 }}</td> <!-- Serial number -->
            <td>{{ consultation.firstName }} {{ consultation.lastName }}</td> <!-- Astrologer name -->
            <td>â‚¹{{ consultation.ratePerMinute }}</td> <!-- Rate per minute -->
            <td>{{ consultation.mobile }}</td> <!-- Astrologer mobile number -->
            <td>{{ consultation.rpmStatus }}</td> <!-- Status -->
            <td>
              <!-- Show Reject button if approved -->
              <button *ngIf="consultation.rpmStatus === 'Approved'" 
                      class="btn btn-danger btn-sm" 
                      (click)="rejectConsultation(consultation)">
                <i class="fa fa-times" style="font-size: 20px;"></i> Reject
              </button>

              <!-- Show Approve button if rejected -->
              <button *ngIf="consultation.rpmStatus === 'Rejected'" 
                      class="btn btn-success btn-sm" 
                      (click)="approveConsultation(consultation)">
                <i class="fa fa-check" style="font-size: 18px;"></i> Approve
              </button>

              <!-- Show both buttons if the status is pending -->
              <button *ngIf="consultation.rpmStatus === 'pending'" 
                      class="btn btn-warning btn-sm" 
                      (click)="approveConsultation(consultation)">
                <i class="fa fa-check" style="font-size: 18px;"></i> Approve
              </button>
              <button *ngIf="consultation.rpmStatus === 'pending'" 
                      class="btn btn-danger btn-sm" 
                      (click)="rejectConsultation(consultation)">
                <i class="fa fa-times" style="font-size: 20px;"></i> Reject
              </button>
            </td>
          </tr>
        </tbody>
      </table>

      <!-- If no consultation prices are available -->
      <div *ngIf="consultationPrices.length === 0">
        <div class="alert alert-warning" role="alert">
          No consultation prices found. Please add a rate.
        </div>
      </div>
    </div>
  </div>
</div>